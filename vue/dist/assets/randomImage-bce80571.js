import{d as q,$ as H,r as x,o as J,S as p,T as b,c as t,a2 as e,U as f,a1 as r,V as M,W as v,J as Q,a4 as Y,ad as Z,ae as F,Y as R,a0 as j,cE as X,y as ee,cF as le,ai as te,ag as se,R as ie,Z as ne}from"./index-291103b4.js";import{a as ae,b as oe,c as re,L as ce,R as de,f as ue,_ as me}from"./MultiSelectKeep-b801971c.js";import{u as pe,c as fe,a as ve,F as ge,d as _e}from"./FileItem-05696d6c.js";import"./functionalCallableComp-33cd562d.js";/* empty css              */import"./shortcut-9b128798.js";import"./Checkbox-12aa1d4b.js";import"./index-89cb307c.js";import"./index-2541210c.js";import"./_isIterateeCall-e0eaeb93.js";const ke={class:"refresh-button"},we={class:"hint"},Ce={key:0,class:"preview-switch"},Se=q({__name:"randomImage",props:{tabIdx:{},paneIdx:{},id:{},paneKey:{}},setup(he){const V=H(),d=x(!1),n=x([]),a=n,g=async()=>{try{d.value=!0;const s=await X();s.length===0&&ee.warn("No data, please generate index in image search page first"),n.value=s}finally{d.value=!1,k()}};J(g);const{stackViewEl:A,multiSelectedIdxs:u,stack:$,scroller:z}=pe({images:n}).toRefs(),{onClearAllSelected:N,onSelectAll:B,onReverseSelect:P}=fe();ae();const{itemSize:_,gridItems:T,cellWidth:E,onScroll:k}=ve(),{showGenInfo:c,imageGenInfo:w,q:U,onContextMenuClick:D,onFileItemClick:G}=oe({openNext:le}),{previewIdx:o,previewing:C,onPreviewVisibleChange:K,previewImgMove:S,canPreview:h}=re(),y=async(s,l,m)=>{$.value=[{curr:"",files:n.value}],await D(s,l,m)};return(s,l)=>{const m=me,O=te,L=se,W=ie;return p(),b("div",{class:"container",ref_key:"stackViewEl",ref:A},[t(m,{show:!!e(u).length||e(V).keepMultiSelect,onClearAllSelected:e(N),onSelectAll:e(B),onReverseSelect:e(P)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),f("div",ke,[t(O,{onClick:g,type:"primary",loading:d.value,shape:"round"},{default:r(()=>[M(v(s.$t("shuffle")),1)]),_:1},8,["loading"])]),t(W,{visible:e(c),"onUpdate:visible":l[1]||(l[1]=i=>Y(c)?c.value=i:null),width:"70vw","mask-closable":"",onOk:l[2]||(l[2]=i=>c.value=!1)},{cancelText:r(()=>[]),default:r(()=>[t(L,{active:"",loading:!e(U).isIdle},{default:r(()=>[f("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto"},onDblclick:l[0]||(l[0]=i=>e(Q)(e(w)))},[f("div",we,v(s.$t("doubleClickToCopy")),1),M(" "+v(e(w)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),t(e(_e),{ref_key:"scroller",ref:z,class:"file-list",items:n.value.slice(),"item-size":e(_).first,"key-field":"fullpath","item-secondary-size":e(_).second,gridItems:e(T),onScroll:e(k)},{default:r(({item:i,index:I})=>[t(ge,{idx:I,file:i,"cell-width":e(E),"full-screen-preview-image-url":e(a)[e(o)]?e(Z)(e(a)[e(o)]):"",onContextMenuClick:y,onPreviewVisibleChange:e(K),"is-selected-mutil-files":e(u).length>1,selected:e(u).includes(I),onFileItemClick:e(G)},null,8,["idx","file","cell-width","full-screen-preview-image-url","onPreviewVisibleChange","is-selected-mutil-files","selected","onFileItemClick"])]),_:1},8,["items","item-size","item-secondary-size","gridItems","onScroll"]),e(C)?(p(),b("div",Ce,[t(e(ce),{onClick:l[3]||(l[3]=i=>e(S)("prev")),class:F({disable:!e(h)("prev")})},null,8,["class"]),t(e(de),{onClick:l[4]||(l[4]=i=>e(S)("next")),class:F({disable:!e(h)("next")})},null,8,["class"])])):R("",!0),e(C)&&e(a)&&e(a)[e(o)]?(p(),j(ue,{key:1,file:e(a)[e(o)],idx:e(o),onContextMenuClick:y},null,8,["file","idx"])):R("",!0)],512)}}});const ze=ne(Se,[["__scopeId","data-v-2e2db2a9"]]);export{ze as default};
